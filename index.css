@import url(https://fonts.googleapis.com/css?family=Lato:300italic);

html,
body {
  width: 100%;
  height: 100%;
}

body {
  background: linear-gradient(45deg, #ffb3d9, #ffe0f0, #ffc0e6, #ffb3d9);
  background-size: 400% 400%;
  animation: gradientShift 8s ease infinite;
  overflow-x: hidden;
}

#cake {
  display: block;
  position: relative;
  margin: -10em auto 0 auto;
  overflow: hidden;
  z-index: 20;
}

/* ============================================== Candle
*/

.candle-1.velas {
  position: absolute;
  top: 212px;
  margin-top: -8.33333333px;
  transform: translateY(-300px);
  backface-visibility: hidden;
  animation: in 500ms 6s ease-out forwards;
}

.candle-9.velas {
  position: absolute;
  top: 212px;
  margin-top: -8.33333333px;
  transform: translateY(-300px);
  backface-visibility: hidden;
  animation: in 500ms 6s ease-out forwards;
}

/* Number 1 - Image candle */
.candle-1 {
  left: 50%;
  margin-left: -30px;
  width: 50px;
  height: 70px;
  position: relative;
  z-index: 5;
}

/* Reuse pseudo-elements: wick (::before) and pink overlay (::after) for candle 1 */
/* Wick below the candle graphic */
.candle-1::before {
  content: "";
  position: absolute;
  top: 15px;
  left: 50%;
  width: 3px;
  height: 8px;
  margin-left: -1.5px;
  background: linear-gradient(180deg, #6a4a3a 0%, #3e2a22 100%);
  border-radius: 2px;
  box-shadow: 0 1px 1px rgba(0,0,0,0.15);
  z-index: -1; /* force behind candle graphic */
  pointer-events: none;
}

/* Candle graphic placed on ::after so we can layer above wick */
.candle-1::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url('https://i.imgur.com/pL8Iajt.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  z-index: 1;
}

/* Decorative elements for candles */
.candle-decoration {
  position: absolute;
  pointer-events: none;
}

/* Hide decorative elements since we're using images now */
.stripe-1,
.stripe-2,
.dot-1,
.dot-2 {
  display: none;
}

/* Number 9 - Image candle */
.candle-9 {
  left: 50%;
  margin-left: -5px;
  width: 50px;
  height: 70px;
  position: relative;
  z-index: 5;
}

/* Tint candles to match strawberry cake palette */
.candle-1,
.candle-9 {
  /* Softer tint shifted further toward pink (8â€“12deg -> 10deg) */
  filter: hue-rotate(10deg) saturate(0.98) brightness(0.94) contrast(0.98)
          drop-shadow(0 1px 0 #f8cfe0)
          drop-shadow(0 3px 6px rgba(0,0,0,0.08));
  opacity: 0.96;
}

/* Reuse pseudo-elements: wick (::before) and pink overlay (::after) for candle 9 */
/* Wick below the candle graphic */
.candle-9::before {
  content: "";
  position: absolute;
  top: 15px;
  left: 50%;
  width: 3px;
  height: 8px;
  margin-left: -1.5px;
  background: linear-gradient(180deg, #6a4a3a 0%, #3e2a22 100%);
  border-radius: 2px;
  box-shadow: 0 1px 1px rgba(0,0,0,0.15);
  z-index: 0; /* behind ::after graphic */
  pointer-events: none;
}

.candle-9::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url('https://i.imgur.com/1Dsxxw1.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  z-index: 1;
}

.nine-tail {
  display: none;
}

.candle-9 .nine-connection {
  display: none;
}

/* ============================================== Fire
*/

/* Flames positioned on top of number 1 */
.candle-1 .fuego {
  border-radius: 100%;
  position: absolute;
  top: -8px;
  left: 50%;
  margin-left: -4px;
  width: 8px;
  height: 22px;
}

/* Flames positioned on top of number 9 */
.candle-9 .fuego {
  border-radius: 100%;
  position: absolute;
  top: -8px;
  left: 50%;
  margin-left: -4px;
  width: 8px;
  height: 22px;
}
.fuego:nth-child(1) {
  animation: fuego 2s 6.5s infinite;
}
.fuego:nth-child(2) {
  animation: fuego 1.5s 6.5s infinite;
}
.fuego:nth-child(3) {
  animation: fuego 1s 6.5s infinite;
}
.fuego:nth-child(4) {
  animation: fuego 0.5s 6.5s infinite;
}
.fuego:nth-child(5) {
  animation: fuego 0.2s 6.5s infinite;
}

/* ============================================== Animation Fire
*/

@keyframes fuego {
  0%, 100% {
    background: rgba(254, 248, 97, 0.5);
    box-shadow: 0 0 40px 10px rgba(248, 233, 209, 0.2);
    transform: translateY(0) scale(1);
  }
  50% {
    background: rgba(255, 50, 0, 0.1);
    box-shadow: 0 0 40px 20px rgba(248, 233, 209, 0.2);
    transform: translateY(-20px) scale(0);
  }
}

@keyframes in {
  to {
    transform: translateY(0);
  }
}

@keyframes cakeAppear {
  0% {
    opacity: 0;
    transform: translateY(50px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes textAppear {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes gradientShift {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

/* Cute floating animation for decorative elements */
@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-3px);
  }
}

@keyframes sparkle {
  0%, 100% {
    opacity: 0.7;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.1);
  }
}

/* Pop-in animation for decorations */
@keyframes popIn {
  0% {
    opacity: 0;
    transform: scale(0.7) translateY(6px);
    filter: blur(1px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: blur(0);
  }
}

/* Disable motion on custom image decorations; keep color filters only */
svg image.strawberry-decoration {
  animation: none !important;
  filter: hue-rotate(10deg) saturate(1.2) brightness(1.1);
}

svg image.leaf-decoration {
  animation: none !important;
  filter: hue-rotate(-20deg) saturate(1.1) brightness(1.05);
}

svg image.flower-decoration {
  animation: none !important;
  filter: hue-rotate(15deg) saturate(1.3) brightness(1.15);
}

/* Staggered pop-in sequence after cake has settled */
#cake image.strawberry-decoration:nth-of-type(1),
#cake image.leaf-decoration:nth-of-type(1),
#cake image.flower-decoration:nth-of-type(1) { animation-delay: 6.4s, 7.0s !important; }
#cake image.strawberry-decoration:nth-of-type(2),
#cake image.leaf-decoration:nth-of-type(2),
#cake image.flower-decoration:nth-of-type(2) { animation-delay: 6.6s, 7.2s !important; }
#cake image.strawberry-decoration:nth-of-type(3),
#cake image.leaf-decoration:nth-of-type(3),
#cake image.flower-decoration:nth-of-type(3) { animation-delay: 6.8s, 7.4s !important; }
#cake image.strawberry-decoration:nth-of-type(4),
#cake image.leaf-decoration:nth-of-type(4) { animation-delay: 7.0s, 7.6s !important; }

/* Keep sprinkles, hearts, stars, and cream static */
svg rect[fill="#ffb3ba"],
svg rect[fill="#ff9aa2"],
svg rect[fill="#ffe0e6"],
svg rect[fill="#ffc0cb"],
svg rect[fill="#ffb6c1"],
svg rect[fill="#ffa0b4"],
svg rect[fill="#ff8fa3"],
svg rect[fill="#ffcccb"],
svg rect[fill="#ffd1dc"],
svg rect[fill="#ffb7c5"],
svg path[fill="#ff8fa3"], /* hearts */
svg path[fill="#ffb6c1"],
svg path[fill="#ffe0e6"], /* cream and stars */
svg path[fill="#ffd1dc"] {
  animation: none !important;
}

/* Safety: stop any incidental animation inside the cake SVG except candles */
#cake image,
#cake rect,
#cake path,
#cake circle,
#cake g {
  animation: none !important;
}

/* Re-enable animations ONLY for decoration images: staged pop-in then float */
#cake image.strawberry-decoration,
#cake image.leaf-decoration,
#cake image.flower-decoration {
  opacity: 0; /* hidden until popIn finishes */
  transform-origin: center;
  animation: popIn 450ms ease-out 6.4s forwards, float 3s ease-in-out 7.0s infinite !important;
  filter: hue-rotate(8deg) saturate(1.15) brightness(1.06)
          drop-shadow(0 0.5px 0 #ffd1dc)
          drop-shadow(0 2px 3px rgba(0,0,0,0.08)) !important;
}

/* Hover effects for candles */
.velas:hover {
  transform: translateY(0) scale(1.1);
  transition: transform 0.3s ease;
}

.velas:hover .fuego {
  animation-duration: 0.1s !important;
}

.text {
  display: block;
  font-weight: 300;
  font-family: 'Lato';
  text-align: center;
  margin: 24px 0;
  color: #97a69e;
  opacity: 0;
  animation: textAppear 500ms 8s ease-out forwards;
}

.text h1 {
  font-size: 1.4em;
  margin: 20px 0 10px 0;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
}

.text p {
  font-size: 1.1em;
  margin: 10px 0;
}

/* Import cute fonts for celebration */
@import url("https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap");

/* Celebration Elements - Enhanced Strawberry Theme */
.celebration-container {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  z-index: 1000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.8s ease;
  --c1: #ffd1dc;
  --c2: #ff8fa3;
}

.celebration-container.active {
  opacity: 1;
  pointer-events: all;
}

.counter {
  position: relative;
  font-size: max(2.8rem, 1rem + 12vw);
  font-family: "Fredoka", cursive;
  font-weight: 300;
  margin: 0;
  opacity: 0;
  transform: scale(0.6) rotate(-5deg);
  transition: all 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  letter-spacing: 0.02em;
  text-shadow: 0 0 0 transparent;
}

.counter.active {
  opacity: 1;
  transform: scale(1) rotate(0deg);
  font-weight: 600;
}

.celebrate {
  color: transparent !important;
  -webkit-background-clip: text;
  background-clip: text;
  background-color: #ff8fa3;
  background-image: linear-gradient(45deg, 
    var(--c2) 0%, 
    #ffb3d9 25%, 
    var(--c1) 50%, 
    #ff9ec7 75%, 
    var(--c2) 100%);
  background-size: 300% auto;
  filter: drop-shadow(rgba(255, 255, 255, 1) 2px 2px 0) 
          drop-shadow(rgba(255, 209, 220, 0.8) 4px 4px 8px)
          drop-shadow(rgba(255, 143, 163, 0.4) 0 0 25px)
          drop-shadow(rgba(255, 182, 193, 0.6) 0 0 40px);
  animation: celebrateBg 5s cubic-bezier(0.25, 1, 0.5, 1) forwards,
             textGlow 3s ease-in-out infinite alternate,
             textBounce 6s ease-in-out infinite;
  transform-origin: center;
}

@keyframes celebrateBg {
  0% {
    background-position: 0% center;
    transform: scale(0.7) rotate(-3deg);
  }
  25% {
    transform: scale(1.15) rotate(2deg);
  }
  50% {
    background-position: 100% center;
    transform: scale(0.95) rotate(-1deg);
  }
  75% {
    transform: scale(1.08) rotate(1deg);
  }
  100% {
    background-position: 300% center;
    transform: scale(1) rotate(0deg);
  }
}

@keyframes textGlow {
  0% {
    filter: drop-shadow(rgba(255, 255, 255, 1) 2px 2px 0) 
            drop-shadow(rgba(255, 209, 220, 0.8) 4px 4px 8px)
            drop-shadow(rgba(255, 143, 163, 0.4) 0 0 25px)
            drop-shadow(rgba(255, 182, 193, 0.6) 0 0 40px);
  }
  100% {
    filter: drop-shadow(rgba(255, 255, 255, 1) 3px 3px 0) 
            drop-shadow(rgba(255, 209, 220, 1) 6px 6px 12px)
            drop-shadow(rgba(255, 143, 163, 0.6) 0 0 35px)
            drop-shadow(rgba(255, 182, 193, 0.8) 0 0 50px);
  }
}

@keyframes textBounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0) scale(1) rotate(0deg);
  }
  10% {
    transform: translateY(-8px) scale(1.02) rotate(1deg);
  }
  30% {
    transform: translateY(-4px) scale(1.01) rotate(-0.5deg);
  }
  60% {
    transform: translateY(-6px) scale(1.015) rotate(0.5deg);
  }
}

/* Simplified glass effect with proper cleanup */
.celebration-container.active::before {
  content: '';
  position: absolute;
  top: -40px;
  left: -40px;
  right: -40px;
  bottom: -40px;
  background: linear-gradient(135deg, 
    rgba(255, 240, 245, 0.12) 0%,
    rgba(255, 209, 220, 0.08) 50%,
    rgba(255, 182, 193, 0.04) 100%);
  -webkit-backdrop-filter: blur(12px) saturate(1.1);
  backdrop-filter: blur(12px) saturate(1.1);
  border-radius: 35px;
  border: 1px solid rgba(255, 182, 193, 0.25);
  box-shadow: 
    inset 0 1px 0 rgba(255, 255, 255, 0.3),
    inset 0 -1px 0 rgba(255, 143, 163, 0.15),
    0 10px 25px rgba(255, 143, 163, 0.15);
  z-index: -1;
  opacity: 0;
  transform: scale(0.9);
  animation: glassAppear 1s ease-out 0.5s forwards, glassDisappear 0.8s ease-out 7s forwards;
}

@keyframes glassAppear {
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes glassDisappear {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.9);
  }
}

/* Simplified sparkle effects with cleanup */
.celebration-container.active::after {
  content: '';
  position: absolute;
  top: -50px;
  left: -50px;
  right: -50px;
  bottom: -50px;
  background: 
    radial-gradient(circle at 25% 25%, rgba(255, 182, 193, 0.6) 1.5px, transparent 1.5px),
    radial-gradient(circle at 75% 25%, rgba(255, 209, 220, 0.4) 1px, transparent 1px),
    radial-gradient(circle at 25% 75%, rgba(255, 143, 163, 0.5) 1px, transparent 1px),
    radial-gradient(circle at 75% 75%, rgba(255, 240, 245, 0.7) 1.5px, transparent 1.5px);
  background-size: 50px 50px, 60px 60px, 45px 45px, 55px 55px;
  border-radius: 45px;
  z-index: -2;
  opacity: 0;
  animation: sparkleAppear 1.2s ease-out 1.2s forwards, sparkleDisappear 0.8s ease-out 7.2s forwards;
}

@keyframes sparkleAppear {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes sparkleDisappear {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.8);
  }
}

@media (prefers-reduced-motion: reduce) {
  .celebrate {
    animation: none !important;
  }
  
  .counter {
    transition: opacity 0.3s ease;
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px 0;
  }
  
  #cake {
    width: 280px;
    height: 700px;
    margin: 0 auto;
    transform: scale(1.2);
  }
  
  .velas {
    width: 6px;
    height: 40px;
  }
  
  /* Fixed candle positioning for mobile - position on cake top */
  .candle-1.velas {
    top: 200px; /* Position on cake top instead of floating */
    left: 40%;
    margin-left: -25px;
  }
  
  .candle-9.velas {
    top: 200px; /* Position on cake top instead of floating */
    left: 60%;
    margin-left: -25px;
  }
  
  /* Mobile candle sizing */
  .candle-1,
  .candle-9 {
    width: 40px;
    height: 55px;
  }
  
  /* Mobile wick positioning - lower on the candle */
  .candle-1::before {
    top: 8px;
    left: 50%;
    width: 2px;
    height: 6px;
    margin-left: -1px;
  }
  
  .candle-9::before {
    top: 8px;
    left: 50%;
    width: 2px;
    height: 6px;
    margin-left: -1px;
  }
  
  .number-display {
    font-size: 12px;
  }
  
  /* Mobile flame positioning - on top of candle */
  .fuego {
    width: 6px;
    height: 15px;
    margin-left: -3px;
    top: -20px;
  }
  
  /* Mobile text sizing */
  .text {
    transform: scale(1.3);
    margin: 40px 0;
  }
  
  .text h1 {
    font-size: 1.8em;
  }
  
  .text p {
    font-size: 1.4em;
  }
  
  /* Mobile celebration text */
  .counter {
    font-size: max(2rem, 1rem + 8vw);
  }
}

@media (max-width: 480px) {
  #cake {
    width: 120px;
    height: 300px;
  }
  
  .velas {
    width: 3px;
    height: 22px;
  }
  
  .number-display {
    font-size: 8px;
  }
  
  .fuego {
    width: 4px;
    height: 12px;
  }
}
@import url(https://fonts.googleapis.com/css?family=Lato:300italic);
@import url("https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap");

/* CSS Reset and Base Styles */
*, *::after { box-sizing: border-box; }

html {
  font-size: 16px;
  scroll-behavior: smooth;
  height: 100%;
  overflow: auto;
  overscroll-behavior: none;
}

html, body {
  width: 100%;
  min-height: 100vh;
  margin: 0;
  padding: 0;
}

body {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  background-attachment: fixed;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
  padding: 0;
  font-family: 'Lato', sans-serif;
  position: relative;
}

/* Hero wrapper to center all content */
.hero {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 0;
  margin: 0;
  position: relative;
  box-sizing: border-box;
}

/* Fine control for inner stack spacing */
.hero-inner {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: relative;
  width: 100%;
  height: 100vh;
}

/* Greeting card container to hold both cake and text */
.greeting-card {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100vh;
  max-width: none;
  padding: 0;
}

/* Responsive Cake Container */
.cake-container {
  display: flex;
  justify-content: center;
  align-items: flex-end;
  width: 100%;
  max-width: 100%;
  height: 60vh;
  margin: 0;
  position: relative;
  z-index: 10;
  overflow: hidden;
  padding-bottom: 0;
}

#cake {
  width: clamp(250px, 50vmin, 600px);
  height: auto;
  max-height: 45vh;
  display: block;
  position: relative;
  overflow: visible;
  z-index: 20;
  transform: translateY(-5%);
}

/* Animations */
@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Cute floating animation for decorative elements */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-3px); }
}

/* Pop-in animation for decorations */
@keyframes popIn {
  0% { opacity: 0; transform: scale(0.7) translateY(6px); filter: blur(1px); }
  100% { opacity: 1; transform: scale(1) translateY(0); filter: blur(0); }
}

/* Decorations: color tweaks only (no motion by default) */
svg image.strawberry-decoration {
  animation: none !important;
  filter: hue-rotate(10deg) saturate(1.2) brightness(1.1);
}
svg image.leaf-decoration {
  animation: none !important;
  filter: hue-rotate(-20deg) saturate(1.1) brightness(1.05);
}
svg image.flower-decoration {
  animation: none !important;
  filter: hue-rotate(15deg) saturate(1.3) brightness(1.15);
}

/* Keep sprinkles, hearts, stars, and cream static */
svg rect[fill="#ffb3ba"],
svg rect[fill="#ff9aa2"],
svg rect[fill="#ffe0e6"],
svg rect[fill="#ffc0cb"],
svg rect[fill="#ffb6c1"],
svg rect[fill="#ffa0b4"],
svg rect[fill="#ff8fa3"],
svg rect[fill="#ffcccb"],
svg rect[fill="#ffd1dc"],
svg rect[fill="#ffb7c5"],
svg path[fill="#ff8fa3"], /* hearts */
svg path[fill="#ffb6c1"],
svg path[fill="#ffe0e6"], /* cream and stars */
svg path[fill="#ffd1dc"] {
  animation: none !important;
}

/* Safety: stop any incidental animation inside the cake SVG */
#cake image,
#cake rect,
#cake path,
#cake circle,
#cake g {
  animation: none !important;
}

/* Re-enable animations ONLY for decoration images: staged pop-in then float */
#cake image.strawberry-decoration,
#cake image.leaf-decoration,
#cake image.flower-decoration {
  opacity: 0; /* hidden until popIn finishes */
  transform-origin: center;
  animation: popIn 450ms ease-out 6.4s forwards, float 3s ease-in-out 7.0s infinite !important;
  filter: hue-rotate(8deg) saturate(1.15) brightness(1.06)
          drop-shadow(0 0.5px 0 #ffd1dc)
          drop-shadow(0 2px 3px rgba(0,0,0,0.08)) !important;
}

/* Staggered pop-in sequence after cake has settled */
#cake image.strawberry-decoration:nth-of-type(1),
#cake image.leaf-decoration:nth-of-type(1),
#cake image.flower-decoration:nth-of-type(1) { animation-delay: 6.4s, 7.0s !important; }
#cake image.strawberry-decoration:nth-of-type(2),
#cake image.leaf-decoration:nth-of-type(2),
#cake image.flower-decoration:nth-of-type(2) { animation-delay: 6.6s, 7.2s !important; }
#cake image.strawberry-decoration:nth-of-type(3),
#cake image.leaf-decoration:nth-of-type(3),
#cake image.flower-decoration:nth-of-type(3) { animation-delay: 6.8s, 7.4s !important; }
#cake image.strawberry-decoration:nth-of-type(4),
#cake image.leaf-decoration:nth-of-type(4) { animation-delay: 7.0s, 7.6s !important; }

/* Animation controls */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
  body { animation: none; background: #ffe0f0; }
}

/* Small Mobile Phones */
@media (max-width: 480px) and (orientation: portrait) {
  .greeting-card {
    justify-content: center;
    padding-top: 0;
  }
  
  .cake-container {
    height: 45vh;
    padding-bottom: 0;
    align-items: flex-end;
    padding-bottom: 1vh;
  }
  
  .hb-section {
    height: 55vh;
    margin: -8vh 0 0 0;
    align-items: flex-start;
  }
  
  #cake {
    width: clamp(200px, 65vmin, 350px);
    max-height: 38vh;
    transform: translateY(0);
  }
  
  .hb-container {
    width: clamp(300px, 95vmin, 550px);
    height: clamp(140px, 40vh, 300px);
  }
  
  #hbTitle {
    font-size: clamp(16px, 4.5vmin, 24px) !important;
  }
}

/* Larger Mobile Phones & Small Tablets */
@media (min-width: 481px) and (max-width: 768px) and (orientation: portrait) {
  .greeting-card {
    justify-content: flex-start;
    padding-top: 12vh;
  }
  
  .cake-container {
    height: 42vh;
    padding-bottom: 0;
    align-items: center;
  }
  
  .hb-section {
    height: 46vh;
    margin: -6vh 0 0 0;
    align-items: flex-start;
    padding-top: 1vh;
  }
  
  #cake {
    width: clamp(240px, 55vmin, 400px);
    max-height: 36vh;
    transform: translateY(0);
  }
  
  .hb-container {
    width: clamp(340px, 85vmin, 650px);
    height: clamp(160px, 32vh, 320px);
  }
  
  #hbTitle {
    font-size: clamp(20px, 3.8vmin, 28px) !important;
  }
}

/* Mobile Landscape Optimization */
@media (max-width: 768px) and (orientation: landscape) {
  .cake-container {
    height: 55vh;
    align-items: center;
  }
  
  .hb-section {
    height: 45vh;
    margin: -8vh 0 0 0;
    align-items: flex-start;
  }
  
  #cake {
    width: clamp(200px, 35vmin, 400px);
    max-height: 40vh;
  }
  
  .hb-container {
    width: clamp(300px, 70vmin, 600px);
    height: clamp(100px, 25vh, 200px);
  }
}

/* Tablet and Desktop Optimization */
@media (min-width: 769px) {
  .cake-container {
    height: 62vh;
    padding-bottom: 0;
  }
  
  .hb-section {
    height: 48vh;
    margin: -10vh 0 0 0;
  }
  
  #cake {
    width: clamp(300px, 45vmin, 700px);
    max-height: 50vh;
  }
  
  .hb-container {
    width: clamp(400px, 70vmin, 1200px);
    height: clamp(200px, 35vh, 400px);
  }
}

/* Landscape Optimization */
@media (orientation: landscape) and (max-height: 600px) {
  .cake-container {
    height: 60vh;
    padding-bottom: 0;
  }
  
  .hb-section {
    height: 50vh;
    margin: -10vh 0 0 0;
  }
  
  #cake {
    width: clamp(200px, 35vmin, 500px);
    max-height: 45vh;
  }
  
  .hb-container {
    width: clamp(350px, 60vmin, 800px);
    height: clamp(120px, 30vh, 250px);
  }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  body { background: linear-gradient(45deg, #2d1b2e, #3d2b3e, #2d1b2e, #3d2b3e); }
}

/* Fallback for browsers without container query support */
@supports not (container-type: inline-size) {
  .cake-container { container-type: normal; }
}

/* Print styles */
@media print {
  body { background: white !important; color: black !important; }
  #cake { max-width: 300px; margin: 0 auto; }
}

/* Performance optimizations */
.cake-container,
#cake { will-change: transform; transform: translateZ(0); /* Force hardware acceleration */ }

/* Safe area insets for notched devices */
@supports (padding: max(0px)) {
  body {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* HB animation section layout and responsive sizing */
/* Position the Happy Birthday text below the cake in the same container */
.hb-section {
  position: relative;
  width: 100%;
  height: 50vh;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  margin: -10vh 0 0 0;
  padding: 0;
  z-index: 20;
  pointer-events: none;
}

.hb-container {
  position: relative;
  width: clamp(350px, 80vmin, 1000px);
  height: clamp(200px, 40vh, 500px);
  min-height: 0;
  max-height: none;
  overflow: visible;
}

.hbMainSVG { position: absolute; inset: 0; width: 100%; height: 100%; }

/* Improve text rendering and cute look */
#hbTitle {
  paint-order: stroke fill;
  stroke: rgba(255, 255, 255, 0.9);
  stroke-width: 1.2px;
  filter:
    drop-shadow(0 2px 0 rgba(0, 0, 0, 0.05))
    drop-shadow(0 6px 10px rgba(0, 0, 0, 0.08));
}

#hbTitle .hb-name { fill: #fff6f8; }

/* Particle interactions */
#hbParticleContainer { pointer-events: none; }

/* Ultra-wide screen optimization */
@media (min-width: 1400px) {
  .cake-container {
    height: 65vh;
    padding-bottom: 0;
  }
  
  .hb-section {
    height: 45vh;
    margin: -10vh 0 0 0;
  }
  
  #cake {
    width: clamp(400px, 40vmin, 800px);
    max-height: 55vh;
  }
  
  .hb-container {
    width: clamp(500px, 60vmin, 1400px);
    height: clamp(250px, 30vh, 450px);
  }
}

/* =============================
   Mobile visibility improvements
   ============================= */
/* Use modern viewport units while keeping earlier rules as fallback */
.hero,
.hero-inner,
.greeting-card {
  min-height: 100svh;
  height: auto;
}

/* Bring sections into a clean vertical flow (no negative overlaps) */
.hb-section {
  margin: 0;
  margin-top: -3svh;
  height: auto;
  min-height: 32svh;
  align-items: center;
}

/* Make cake area flexible and centered on phones */
.cake-container {
  align-items: center;
  height: auto;
  min-height: 34svh;
}

/* Scale cake a bit larger on phones and remove upward shift */
#cake {
  transform: none;
  width: clamp(260px, 85vw, 520px);
  max-height: 46svh;
}

/* Tighter, clearer title sizing and container dimensions */
.hb-container {
  width: min(96vw, 680px);
  height: clamp(220px, 38svh, 440px);
}

#hbTitle {
  font-size: clamp(26px, 8vw, 44px) !important;
}

/* Allow scroll on mobile when content exceeds viewport */
@media (max-width: 768px) {
  body { overflow: auto; }
}

/* Small phone portrait refinements */
@media (max-width: 480px) and (orientation: portrait) {
  .cake-container { min-height: 42svh; }
  .hb-section { margin-top: -5svh; }
  #cake { width: clamp(280px, 92vw, 580px); max-height: 50svh; }
  .hb-container { width: min(96vw, 600px); height: clamp(240px, 42svh, 460px); }
  #hbTitle { font-size: clamp(26px, 9vw, 46px) !important; }
}

/* Larger phones/tablets portrait */
@media (min-width: 481px) and (max-width: 768px) and (orientation: portrait) {
  .cake-container { min-height: 40svh; }
  .hb-section { margin-top: -4svh; }
  #cake { width: clamp(280px, 84vw, 540px); max-height: 48svh; }
  .hb-container { width: min(94vw, 700px); height: clamp(240px, 38svh, 440px); }
  #hbTitle { font-size: clamp(28px, 7vw, 48px) !important; }
}

/* Mobile landscape with short height */
@media (orientation: landscape) and (max-height: 600px) {
  .hero, .hero-inner, .greeting-card { min-height: 100dvh; }
  .cake-container { min-height: 52vh; }
  .hb-section { min-height: 40vh; }
  .hb-container { height: clamp(180px, 40vh, 320px); }
}

/* Desktop refinements: keep clean vertical stack, no overlap */
@media (min-width: 769px) {
  .hb-section { margin: 0; min-height: 36vh; }
  .cake-container { min-height: 50vh; }
  #cake { width: clamp(320px, 36vw, 620px); max-height: 48vh; }
}

/* End of stylesheet */
